  tm_opt <- timer;
  b <- & NUMBER;
  (* Check the timer *)
  c = can_play tm_opt b;
  match c with
  | False => 
      msg  = {tag : Main; to : sender; amount : 0; 
              code : time_window_missed};
      msgs = one_msg msg;
      send msgs        
  | True  => 
    isa = builtin eq sender player_a;
    isb = builtin eq sender player_b;
    tt = True;
    match isa with
    | True =>
      game_on := t;
      ah <- player_a_hash;
      hopt = update_hash ah guess;
      player_a_hash := hopt;
      tm1 = update_timer tm_opt b;
      timer := tm1;
      msg  = {tag : Main; to : sender; amount : 0; 
              code : solution_submitted};
      msgs = one_msg msg;
      send msgs        
    | False =>
      match isb with 
      | True =>
        game_on := tt;
        bh <- player_b_hash;
        hopt = update_hash bh guess;
        player_b_hash := hopt;
        tm1 = update_timer tm_opt b;
        timer := tm1;
        msg  = {tag : Main; to : sender; amount : 0; 
                code : solution_submitted};
        msgs = one_msg msg;
        send msgs        
      | False => 
        msg  = {tag : Main; to : sender; amount : 0; 
                code : not_a_player};
        msgs = one_msg msg;
        send msgs
      end	
    end
  end
